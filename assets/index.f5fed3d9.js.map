{"version":3,"file":"index.f5fed3d9.js","sources":["../../vite/dynamic-import-polyfill","../../src/App.svelte","../../src/index.ts"],"sourcesContent":["const p = function polyfill(modulePath = '.', importFunctionName = '__import__') {\n    try {\n        self[importFunctionName] = new Function('u', `return import(u)`);\n    }\n    catch (error) {\n        const baseURL = new URL(modulePath, location);\n        const cleanup = (script) => {\n            URL.revokeObjectURL(script.src);\n            script.remove();\n        };\n        self[importFunctionName] = (url) => new Promise((resolve, reject) => {\n            const absURL = new URL(url, baseURL);\n            // If the module has already been imported, resolve immediately.\n            if (self[importFunctionName].moduleMap[absURL]) {\n                return resolve(self[importFunctionName].moduleMap[absURL]);\n            }\n            const moduleBlob = new Blob([\n                `import * as m from '${absURL}';`,\n                `${importFunctionName}.moduleMap['${absURL}']=m;`\n            ], { type: 'text/javascript' });\n            const script = Object.assign(document.createElement('script'), {\n                type: 'module',\n                src: URL.createObjectURL(moduleBlob),\n                onerror() {\n                    reject(new Error(`Failed to import: ${url}`));\n                    cleanup(script);\n                },\n                onload() {\n                    resolve(self[importFunctionName].moduleMap[absURL]);\n                    cleanup(script);\n                }\n            });\n            document.head.appendChild(script);\n        });\n        self[importFunctionName].moduleMap = {};\n    }\n};__VITE_IS_MODERN__&&p(\"/generate-text-video/assets/\");","<script lang=\"ts\">\n  import html2canvas from 'html2canvas';\n  import { createFFmpeg } from '@ffmpeg/ffmpeg';\n\n  const ffmpeg = createFFmpeg();\n\n  let text: string = 'ここにテキスト';\n  let textColor: string = '#fff';\n  let backgroundColor: string = '#000';\n\n  let preview: HTMLDivElement;\n\n  const onClick = async () => {\n    const canvas = await html2canvas(preview);\n    await ffmpeg.load();\n    canvas.toBlob(async (blob) => {\n      if (!blob) throw new Error('blob');\n\n      ffmpeg.FS(\n        'writeFile',\n        'image.png',\n        new Uint8Array(await blob.arrayBuffer())\n      );\n\n      await ffmpeg.run(\n        '-loop',\n        '1',\n        '-i',\n        'image.png',\n        '-c:v',\n        'libx264',\n        '-t',\n        '15',\n        '-pix_fmt',\n        'yuv420p',\n        '-vf',\n        'scale=320:240',\n        'out.mp4'\n      );\n\n      const data = ffmpeg.FS('readFile', 'out.mp4');\n\n      const link: HTMLAnchorElement = document.createElement('a');\n      link.href = URL.createObjectURL(new Blob([data]));\n      link.download = 'out.mp4';\n      link.click();\n    });\n  };\n</script>\n\n<section>\n  <input type=\"text\" bind:value={text} />\n  <input type=\"text\" bind:value={backgroundColor} />\n  <button on:click={onClick}>GENERATE</button>\n</section>\n\n<section>\n  <div\n    class=\"preview\"\n    style={`color: ${textColor}; background-color: ${backgroundColor}`}\n    bind:this={preview}\n  >\n    {text}\n  </div>\n</section>\n\n<style>\n  .preview {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 640px;\n    height: 360px;\n  }\n</style>\n","import App from './App.svelte';\n\nconst app = new App({\n  target: document.body\n});\n\nexport default app;\n"],"names":["modulePath","importFunctionName","Function","error","baseURL","URL","location","cleanup","script","revokeObjectURL","src","remove","url","Promise","resolve","reject","absURL","self","moduleMap","moduleBlob","Blob","type","Object","assign","document","createElement","createObjectURL","[object Object]","Error","head","appendChild","p","ctx","textColor","ctx2","__awaiter","this","thisArg","_arguments","P","generator","target","body"],"mappings":"wLAAU,SAAkBA,EAAa,IAAKC,EAAqB,uBAEtDA,GAAsB,IAAIC,SAAS,IAAK,0BAE1CC,SACGC,EAAU,IAAIC,IAAIL,EAAYM,UAC9BC,EAAWC,QACTC,gBAAgBD,EAAOE,OACpBC,eAENV,GAAuBW,GAAQ,IAAIC,SAAQ,CAACC,EAASC,WAChDC,EAAS,IAAIX,IAAIO,EAAKR,MAExBa,KAAKhB,GAAoBiB,UAAUF,UAC5BF,EAAQG,KAAKhB,GAAoBiB,UAAUF,UAEhDG,EAAa,IAAIC,KAAK,CACxB,uBAAuBJ,MACvB,GAAGf,gBAAiCe,UACrC,CAAEK,KAAM,oBACLb,EAASc,OAAOC,OAAOC,SAASC,cAAc,UAAW,CAC3DJ,KAAM,SACNX,IAAKL,IAAIqB,gBAAgBP,GACzBQ,YACW,IAAIC,MAAM,qBAAqBhB,QAC9BJ,IAEZmB,WACYV,KAAKhB,GAAoBiB,UAAUF,MACnCR,eAGPqB,KAAKC,YAAYtB,WAEzBP,GAAoBiB,UAAY,IAEvBa,CAAE,gNC0BnBC,sRAAAA,iJAHgBC,wBAAgCD,oCARpBA,wBACAA,0HACbA,sCAFaE,UAAAA,qBACAA,UAAAA,eAU5BA,4BAHgBD,wBAAgCC,wHA3DpCC,EAAAC,MAAAA,KAAAD,oBAAAE,EAAAC,EAAAC,EAAAC,u7BCEL,gEAAQ,CAClBC,OAAQjB,SAASkB"}